<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ATMEGA162 Node 1 code for ping pong game: CAN/can.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ATMEGA162 Node 1 code for ping pong game
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_85f99c390bf4c27b62435416daf93629.html">CAN</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">can.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver for sending and receiving can messages. Requires <a class="el" href="mcp2515_8h.html" title="Interface for setting and reading register from MCP2515 CAN controller over spi.">mcp2515.h</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for can.h:</div>
<div class="dyncontent">
<div class="center"><img src="can_8h__incl.png" border="0" usemap="#CAN_2can_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="can_8h__dep__incl.png" border="0" usemap="#CAN_2can_8hdep" alt=""/></div>
</div>
</div>
<p><a href="can_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncan__data__t.html">can_data_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcan__frame__t.html">can_frame_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct for defining a can frame.  <a href="structcan__frame__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a819ae8a38cd82cc4cea705b67dcdc62a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8h.html#a819ae8a38cd82cc4cea705b67dcdc62a">can_rtr_t</a> { <b>DATA_FRAME</b> = 0, 
<b>REMOTE_TRANSMIT_REQUEST</b> = 1
 }</td></tr>
<tr class="memdesc:a819ae8a38cd82cc4cea705b67dcdc62a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum for determining the type of can frame. It can either be a dataframe or a request.  <a href="can_8h.html#a819ae8a38cd82cc4cea705b67dcdc62a">More...</a><br /></td></tr>
<tr class="separator:a819ae8a38cd82cc4cea705b67dcdc62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac7781a37ca14c5bf42c4fe9de1f4daa8"><td class="memItemLeft" align="right" valign="top"><a id="ac7781a37ca14c5bf42c4fe9de1f4daa8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8h.html#ac7781a37ca14c5bf42c4fe9de1f4daa8">can_init</a> (void)</td></tr>
<tr class="memdesc:ac7781a37ca14c5bf42c4fe9de1f4daa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets CAN to normal mode. Also sets TXnRTS pins to digital inputs and enables CAN interrupt to TXB0. It then sets the CNF1, CNF3 and CNF2 registers such that the following values are achieved: PropSeg = 1 , PS1 = 1, PS2 = 2, SJW = 1, Which fulfill the requirements mentioned in the MCP2515 datasheet (p. 43) <br /></td></tr>
<tr class="separator:ac7781a37ca14c5bf42c4fe9de1f4daa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a72884c9c118eee8c10f42f0f647e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8h.html#ad7a72884c9c118eee8c10f42f0f647e6">can_transmit</a> (<a class="el" href="structcan__frame__t.html">can_frame_t</a> *can_frame)</td></tr>
<tr class="memdesc:ad7a72884c9c118eee8c10f42f0f647e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">uses <code><a class="el" href="structcan__frame__t.html" title="Struct for defining a can frame.">can_frame_t</a></code> to define both where to send data, as well as which data should be sent. The data is then subsequently written to the MCP data registers. Once all data has been transmitted <code>mcp_request_to_send</code> is called, and the data is sent.  <a href="can_8h.html#ad7a72884c9c118eee8c10f42f0f647e6">More...</a><br /></td></tr>
<tr class="separator:ad7a72884c9c118eee8c10f42f0f647e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee20ffebafc5be1ae708f8ab75505d39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="can_8h.html#aee20ffebafc5be1ae708f8ab75505d39">can_receive</a> (uint8_t rtx_register, <a class="el" href="structcan__frame__t.html">can_frame_t</a> *can_frame)</td></tr>
<tr class="memdesc:aee20ffebafc5be1ae708f8ab75505d39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read last received frame from a buffer. This does not send spi signals.  <a href="can_8h.html#aee20ffebafc5be1ae708f8ab75505d39">More...</a><br /></td></tr>
<tr class="separator:aee20ffebafc5be1ae708f8ab75505d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Driver for sending and receiving can messages. Requires <a class="el" href="mcp2515_8h.html" title="Interface for setting and reading register from MCP2515 CAN controller over spi.">mcp2515.h</a>. </p>
<dl class="section author"><dt>Author</dt><dd>Ask Øren, Steffen Folåsen, Sivaranjith Sivarasa </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2021-10-19</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2021 </dd></dl>

<p class="definition">Definition in file <a class="el" href="can_8h_source.html">can.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a819ae8a38cd82cc4cea705b67dcdc62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a819ae8a38cd82cc4cea705b67dcdc62a">&#9670;&nbsp;</a></span>can_rtr_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="can_8h.html#a819ae8a38cd82cc4cea705b67dcdc62a">can_rtr_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum for determining the type of can frame. It can either be a dataframe or a request. </p>

<p class="definition">Definition at line <a class="el" href="can_8h_source.html#l00020">20</a> of file <a class="el" href="can_8h_source.html">can.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aee20ffebafc5be1ae708f8ab75505d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee20ffebafc5be1ae708f8ab75505d39">&#9670;&nbsp;</a></span>can_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can_receive </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rtx_register</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcan__frame__t.html">can_frame_t</a> *&#160;</td>
          <td class="paramname"><em>can_frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read last received frame from a buffer. This does not send spi signals. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtx_register</td><td>which of the two MCP2515 buffers to read from </td></tr>
    <tr><td class="paramname">can_frame</td><td>a reference to a can struct that will be the received message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="can_8c_source.html#l00043">43</a> of file <a class="el" href="can_8c_source.html">can.c</a>.</p>

</div>
</div>
<a id="ad7a72884c9c118eee8c10f42f0f647e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7a72884c9c118eee8c10f42f0f647e6">&#9670;&nbsp;</a></span>can_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can_transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__frame__t.html">can_frame_t</a> *&#160;</td>
          <td class="paramname"><em>can_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>uses <code><a class="el" href="structcan__frame__t.html" title="Struct for defining a can frame.">can_frame_t</a></code> to define both where to send data, as well as which data should be sent. The data is then subsequently written to the MCP data registers. Once all data has been transmitted <code>mcp_request_to_send</code> is called, and the data is sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can_frame</td><td>the frame of the data we wish to send </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="can_8c_source.html#l00026">26</a> of file <a class="el" href="can_8c_source.html">can.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
